{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\xaere\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\stuff\\\\react-001-starter-files-2021-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\xaere\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\stuff\\\\react-001-starter-files-2021-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:\\\\Users\\\\xaere\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\stuff\\\\react-001-starter-files-2021-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\xaere\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\stuff\\\\react-001-starter-files-2021-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\xaere\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\stuff\\\\react-001-starter-files-2021-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\xaere\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\stuff\\\\react-001-starter-files-2021-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\xaere\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\stuff\\\\react-001-starter-files-2021-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import Header from\"./Header\";import Order from\"./Order\";import MenuAdmin from\"./MenuAdmin\";import Burger from\"./Burger\";import sampleBurgers from\"../sample-burgers\";import base from\"../base\";import SignIn from\"./Auth/SignIn\";import firebase from\"firebase/app\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={burgers:{},order:{}};_this.addBurger=function(burger){var burgers=_objectSpread({},_this.state.burgers);burgers[\"burger\".concat(Date.now())]=burger;_this.setState({burgers:burgers});};_this.updateBurger=function(key,updatedBurger){var burgers=_objectSpread({},_this.state.burgers);burgers[key]=updatedBurger;_this.setState({burgers:burgers});};_this.deleteBurger=function(key){var burgers=_objectSpread({},_this.state.burgers);burgers[key]=null;_this.setState({burgers:burgers});};_this.deleteFromOrder=function(key){var order=_objectSpread({},_this.state.order);delete order[key];_this.setState({order:order});};_this.loadSampleBurgers=function(){_this.setState({burgers:sampleBurgers});};_this.addToOrder=function(key){var order=_objectSpread({},_this.state.order);order[key]=order[key]+1||1;_this.setState({order:order});};_this.handleLogout=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return firebase.auth().signOut();case 2:window.location.reload();case 3:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var params=this.props.match.params;var localStorageRef=localStorage.getItem(params.restaurantId);if(localStorageRef){this.setState({order:JSON.parse(localStorageRef)});}this.ref=base.syncState(\"\".concat(params.restaurantId,\"/burgers\"),{context:this,state:\"burgers\"});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var params=this.props.match.params;localStorage.setItem(params.restaurantId,JSON.stringify(this.state.order));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){base.removeBinding(this.ref);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(SignIn,null,/*#__PURE__*/React.createElement(\"div\",{className:\"burger-paradise\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu\"},/*#__PURE__*/React.createElement(Header,{title:\"Veru hot burger\",amount:10,hot:true}),/*#__PURE__*/React.createElement(\"ul\",{className:\"birgers\"},Object.keys(this.state.burgers).map(function(key){return/*#__PURE__*/React.createElement(Burger,{key:key,index:key,addToOrder:_this2.addToOrder,details:_this2.state.burgers[key]});}))),/*#__PURE__*/React.createElement(Order,{burgers:this.state.burgers,order:this.state.order,deleteFromOrder:this.deleteFromOrder}),/*#__PURE__*/React.createElement(MenuAdmin,{addBurger:this.addBurger,loadSampleBurgers:this.loadSampleBurgers,burgers:this.state.burgers,updateBurger:this.updateBurger,deleteBurger:this.deleteBurger,handleLogout:this.handleLogout})));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/xaere/OneDrive/Рабочий стол/stuff/react-001-starter-files-2021-main/src/components/App.js"],"names":["React","Header","Order","MenuAdmin","Burger","sampleBurgers","base","SignIn","firebase","App","state","burgers","order","addBurger","burger","Date","now","setState","updateBurger","key","updatedBurger","deleteBurger","deleteFromOrder","loadSampleBurgers","addToOrder","handleLogout","auth","signOut","window","location","reload","params","props","match","localStorageRef","localStorage","getItem","restaurantId","JSON","parse","ref","syncState","context","setItem","stringify","removeBinding","Object","keys","map","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport Order from \"./Order\";\r\nimport MenuAdmin from \"./MenuAdmin\";\r\nimport Burger from \"./Burger\";\r\nimport sampleBurgers from \"../sample-burgers\";\r\nimport base from \"../base\";\r\nimport propTypes from \"prop-types\";\r\nimport SignIn from \"./Auth/SignIn\";\r\nimport firebase from \"firebase/app\";\r\n\r\nclass App extends React.Component {\r\n\r\n  static propTypes = {\r\n    match: propTypes.object\r\n  }\r\n\r\n  state = {\r\n    burgers: {},\r\n    order: {},\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { params } = this.props.match;\r\n\r\n    const localStorageRef = localStorage.getItem(params.restaurantId);\r\n    if (localStorageRef) {\r\n      this.setState({ order: JSON.parse(localStorageRef) });\r\n    }\r\n    this.ref = base.syncState(`${params.restaurantId}/burgers`, {\r\n      context: this,\r\n      state: \"burgers\",\r\n    });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { params } = this.props.match;\r\n    localStorage.setItem(params.restaurantId, JSON.stringify(this.state.order));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    base.removeBinding(this.ref);\r\n  }\r\n\r\n  addBurger = (burger) => {\r\n    const burgers = { ...this.state.burgers };\r\n    burgers[`burger${Date.now()}`] = burger;\r\n    this.setState({ burgers });\r\n  };\r\n\r\n  updateBurger = (key, updatedBurger) => {\r\n    const burgers = { ...this.state.burgers };\r\n    burgers[key] = updatedBurger;\r\n    this.setState({ burgers });\r\n  };\r\n\r\n  deleteBurger = (key) => {\r\n    const burgers = { ...this.state.burgers };\r\n    burgers[key] = null;\r\n    this.setState({ burgers });\r\n  };\r\n\r\n  deleteFromOrder = (key) => {\r\n    const order = { ...this.state.order };\r\n    delete order[key];\r\n    this.setState({ order });\r\n  };\r\n\r\n  loadSampleBurgers = () => {\r\n    this.setState({ burgers: sampleBurgers });\r\n  };\r\n\r\n  addToOrder = (key) => {\r\n    const order = { ...this.state.order };\r\n    order[key] = order[key] + 1 || 1;\r\n    this.setState({ order });\r\n  };\r\n\r\n  handleLogout = async () => {\r\n    await firebase.auth().signOut();\r\n    window.location.reload();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <SignIn>\r\n      <div className=\"burger-paradise\">\r\n        <div className=\"menu\">\r\n          <Header title=\"Veru hot burger\" amount={10} hot={true} />\r\n          <ul className=\"birgers\"> \r\n            {Object.keys(this.state.burgers).map((key) => {\r\n              return (\r\n                <Burger\r\n                  key={key}\r\n                  index={key}\r\n                  addToOrder={this.addToOrder}\r\n                  details={this.state.burgers[key]}\r\n                />\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n        <Order\r\n          burgers={this.state.burgers}\r\n          order={this.state.order}\r\n          deleteFromOrder={this.deleteFromOrder}\r\n        />\r\n        <MenuAdmin\r\n          addBurger={this.addBurger}\r\n          loadSampleBurgers={this.loadSampleBurgers}\r\n          burgers={this.state.burgers}\r\n          updateBurger={this.updateBurger}\r\n          deleteBurger={this.deleteBurger}\r\n          handleLogout={this.handleLogout}\r\n        />\r\n      </div>\r\n      </SignIn>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}