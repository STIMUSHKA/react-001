{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xaere\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\stuff\\\\react-001-starter-files-2021-main\\\\src\\\\components\\\\App.js\";\nimport React from \"react\";\nimport Header from \"./Header\";\nimport Order from \"./Order\";\nimport MenuAdmin from \"./MenuAdmin\";\nimport Burger from \"./Burger\";\nimport sampleBurgers from \"../sample-burgers\";\nimport base from \"../base\";\nimport propTypes from \"prop-types\";\nimport SignIn from \"./Auth/SignIn\";\nimport firebase from \"firebase/app\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      burgers: {},\n      order: {}\n    };\n\n    this.addBurger = burger => {\n      const burgers = { ...this.state.burgers\n      };\n      burgers[`burger${Date.now()}`] = burger;\n      this.setState({\n        burgers\n      });\n    };\n\n    this.updateBurger = (key, updatedBurger) => {\n      const burgers = { ...this.state.burgers\n      };\n      burgers[key] = updatedBurger;\n      this.setState({\n        burgers\n      });\n    };\n\n    this.deleteBurger = key => {\n      const burgers = { ...this.state.burgers\n      };\n      burgers[key] = null;\n      this.setState({\n        burgers\n      });\n    };\n\n    this.deleteFromOrder = key => {\n      const order = { ...this.state.order\n      };\n      delete order[key];\n      this.setState({\n        order\n      });\n    };\n\n    this.loadSampleBurgers = () => {\n      this.setState({\n        burgers: sampleBurgers\n      });\n    };\n\n    this.addToOrder = key => {\n      const order = { ...this.state.order\n      };\n      order[key] = order[key] + 1 || 1;\n      this.setState({\n        order\n      });\n    };\n\n    this.handleLogout = async () => {\n      await firebase.auth().signOut();\n      window.location.reload();\n    };\n  }\n\n  componentDidMount() {\n    const {\n      params\n    } = this.props.match;\n    const localStorageRef = localStorage.getItem(params.restaurantId);\n\n    if (localStorageRef) {\n      this.setState({\n        order: JSON.parse(localStorageRef)\n      });\n    }\n\n    this.ref = base.syncState(`${params.restaurantId}/burgers`, {\n      context: this,\n      state: \"burgers\"\n    });\n  }\n\n  componentDidUpdate() {\n    const {\n      params\n    } = this.props.match;\n    localStorage.setItem(params.restaurantId, JSON.stringify(this.state.order));\n  }\n\n  componentWillUnmount() {\n    base.removeBinding(this.ref);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(SignIn, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"burger-paradise\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      title: \"Veru hot burger\",\n      amount: 10,\n      hot: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"birgers\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, Object.keys(this.state.burgers).map(key => {\n      return /*#__PURE__*/React.createElement(Burger, {\n        key: key,\n        index: key,\n        addToOrder: this.addToOrder,\n        details: this.state.burgers[key],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }\n      });\n    }))), /*#__PURE__*/React.createElement(Order, {\n      burgers: this.state.burgers,\n      order: this.state.order,\n      deleteFromOrder: this.deleteFromOrder,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(MenuAdmin, {\n      addBurger: this.addBurger,\n      loadSampleBurgers: this.loadSampleBurgers,\n      burgers: this.state.burgers,\n      updateBurger: this.updateBurger,\n      deleteBurger: this.deleteBurger,\n      handleLogout: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    })));\n  }\n\n}\n\nApp.propTypes = {\n  match: propTypes.object\n};\nexport default App;","map":{"version":3,"sources":["C:/Users/xaere/OneDrive/Рабочий стол/stuff/react-001-starter-files-2021-main/src/components/App.js"],"names":["React","Header","Order","MenuAdmin","Burger","sampleBurgers","base","propTypes","SignIn","firebase","App","Component","state","burgers","order","addBurger","burger","Date","now","setState","updateBurger","key","updatedBurger","deleteBurger","deleteFromOrder","loadSampleBurgers","addToOrder","handleLogout","auth","signOut","window","location","reload","componentDidMount","params","props","match","localStorageRef","localStorage","getItem","restaurantId","JSON","parse","ref","syncState","context","componentDidUpdate","setItem","stringify","componentWillUnmount","removeBinding","render","Object","keys","map","object"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport Order from \"./Order\";\r\nimport MenuAdmin from \"./MenuAdmin\";\r\nimport Burger from \"./Burger\";\r\nimport sampleBurgers from \"../sample-burgers\";\r\nimport base from \"../base\";\r\nimport propTypes from \"prop-types\";\r\nimport SignIn from \"./Auth/SignIn\";\r\nimport firebase from \"firebase/app\";\r\n\r\nclass App extends React.Component {\r\n\r\n  static propTypes = {\r\n    match: propTypes.object\r\n  }\r\n\r\n  state = {\r\n    burgers: {},\r\n    order: {},\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { params } = this.props.match;\r\n\r\n    const localStorageRef = localStorage.getItem(params.restaurantId);\r\n    if (localStorageRef) {\r\n      this.setState({ order: JSON.parse(localStorageRef) });\r\n    }\r\n    this.ref = base.syncState(`${params.restaurantId}/burgers`, {\r\n      context: this,\r\n      state: \"burgers\",\r\n    });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { params } = this.props.match;\r\n    localStorage.setItem(params.restaurantId, JSON.stringify(this.state.order));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    base.removeBinding(this.ref);\r\n  }\r\n\r\n  addBurger = (burger) => {\r\n    const burgers = { ...this.state.burgers };\r\n    burgers[`burger${Date.now()}`] = burger;\r\n    this.setState({ burgers });\r\n  };\r\n\r\n  updateBurger = (key, updatedBurger) => {\r\n    const burgers = { ...this.state.burgers };\r\n    burgers[key] = updatedBurger;\r\n    this.setState({ burgers });\r\n  };\r\n\r\n  deleteBurger = (key) => {\r\n    const burgers = { ...this.state.burgers };\r\n    burgers[key] = null;\r\n    this.setState({ burgers });\r\n  };\r\n\r\n  deleteFromOrder = (key) => {\r\n    const order = { ...this.state.order };\r\n    delete order[key];\r\n    this.setState({ order });\r\n  };\r\n\r\n  loadSampleBurgers = () => {\r\n    this.setState({ burgers: sampleBurgers });\r\n  };\r\n\r\n  addToOrder = (key) => {\r\n    const order = { ...this.state.order };\r\n    order[key] = order[key] + 1 || 1;\r\n    this.setState({ order });\r\n  };\r\n\r\n  handleLogout = async () => {\r\n    await firebase.auth().signOut();\r\n    window.location.reload();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <SignIn>\r\n      <div className=\"burger-paradise\">\r\n        <div className=\"menu\">\r\n          <Header title=\"Veru hot burger\" amount={10} hot={true} />\r\n          <ul className=\"birgers\"> \r\n            {Object.keys(this.state.burgers).map((key) => {\r\n              return (\r\n                <Burger\r\n                  key={key}\r\n                  index={key}\r\n                  addToOrder={this.addToOrder}\r\n                  details={this.state.burgers[key]}\r\n                />\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n        <Order\r\n          burgers={this.state.burgers}\r\n          order={this.state.order}\r\n          deleteFromOrder={this.deleteFromOrder}\r\n        />\r\n        <MenuAdmin\r\n          addBurger={this.addBurger}\r\n          loadSampleBurgers={this.loadSampleBurgers}\r\n          burgers={this.state.burgers}\r\n          updateBurger={this.updateBurger}\r\n          deleteBurger={this.deleteBurger}\r\n          handleLogout={this.handleLogout}\r\n        />\r\n      </div>\r\n      </SignIn>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}